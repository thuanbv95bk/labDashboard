<form [formGroup]="form">
    <div class="table-responsive pt-2">
      <table class="table table-bordered table-sm mb-0">
        <thead class="head-light">
          <tr>
            <th>STT</th>
            <th>Họ và tên <span class="col-required">*</span></th>
            <th>Số điện thoại</th>
            <th>Số giấy phép lái xe <span class="col-required">*</span></th>
            <th>Ngày cấp <span class="col-required">*</span></th>
            <th>Ngày hết hạn <span class="col-required">*</span></th>
            <th>Nơi cấp <span class="col-required">*</span></th>
            <th>Loại bằng <span class="col-required">*</span></th>
            <th>Ngày cập nhật</th>
            <th>Xóa</th>
          </tr>
        </thead>
        <tbody formArrayName="drivers">
          <tr *ngFor="let driver of driversForm.controls; let i = index" [formGroupName]="i">
            <td>{{ i + filterEmployeesGrid.pageIndex * filterEmployeesGrid.pageSize }}</td>
            <td><input formControlName="displayName" class="form-control form-control-sm" /></td>
            <td><input formControlName="mobile" class="form-control form-control-sm" /></td>
            <td><input formControlName="driverLicense" class="form-control form-control-sm" /></td>
            <td><input type="date" formControlName="issueLicenseDate" class="form-control form-control-sm" /></td>
            <td><input type="date" formControlName="expireLicenseDate" class="form-control form-control-sm" /></td>
            <td><input formControlName="issueLicensePlace" class="form-control form-control-sm" /></td>
            <td>
              <select formControlName="licenseType" class="form-control form-control-sm">
                <option value="">Chọn loại bằng</option>
                <option *ngFor="let type of licenseTypes" [value]="type">{{ type }}</option>
              </select>
            </td>
            <td>{{ today | date : 'HH:mm dd/MM/yyyy' }}</td>
            <td>
              <button class="btn btn-sm btn-danger" (click)="removeDriver(i)">
                <i class="fa fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </form>
  
  
  get driversForm(): FormArray {
    return this.form.get('drivers') as FormArray;
  }

  addDriver() {
    this.driversForm.push(
      this.fb.group({
        displayName: ['', Validators.required],
        mobile: [''],
        driverLicense: ['', Validators.required],
        issueLicenseDate: ['', Validators.required],
        expireLicenseDate: ['', Validators.required],
        issueLicensePlace: ['', Validators.required],
        licenseType: ['', Validators.required],
      })
    );
  }

  removeDriver(index: number) {
    this.driversForm.removeAt(index);
  }